// Fallback, falls adapter.js fehlt
window.setChanged = window.setChanged || function(){ console.warn('setChanged missing'); };

// Debug-Log
console.log('BACnet-UI loaded');

// Wird aufgerufen, wenn die Seite geladen/Refreshed wird
function load(settings, onChange) {
  console.log('BACnet-UI.load()', settings);
  values2table('devices', settings.devices || [], onChange);
  onChange(false);
}

// Speichert die Tabelle ins native.devices-Objekt
function save(callback) {
  const devs = table2values('devices');
  console.log('BACnet-UI.save()', devs);
  callback({ devices: devs });
}

// Hook up buttons und die Core-Funktionen
document.getElementById('add').onclick = () => addRow(setChanged);
window.load = load;
window.save = save;

<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>BACnet Admin</title>
<style>.table-values{width:100%;border-collapse:collapse;} .table-values th,.table-values td{border:1px solid #ccc;padding:4px;} .btn{cursor:pointer;color:blue;text-decoration:underline;}</style>
</head><body>
<h3>Geräte</h3>
<button id="add">+ Gerät</button>
<table id="devices" class="table-values"><thead><tr>
<th>Name</th><th>Adresse</th><th>Objekt-Typ</th><th>Instanz</th><th>Property-ID</th><th>Aktion</th>
</tr></thead><tbody></tbody></table>
<script src="tab.js"></script>
</body></html>